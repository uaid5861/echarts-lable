import{d as N,a as O,r as R,o as U,c as q,e as P,f as M,F as D,C as A,D as F,p as $,m as G,_ as V}from"./index-13e6781a.js";if(!T)var T={map:function(f,a){var l={};return a?f.map(function(b,v){return l.index=v,a.call(l,b)}):f.slice()},naturalOrder:function(f,a){return f<a?-1:f>a?1:0},sum:function(f,a){var l={};return f.reduce(a?function(b,v,w){return l.index=w,b+a.call(l,v)}:function(b,v){return b+v},0)},max:function(f,a){return Math.max.apply(null,a?T.map(f,a):f)}};var W=function(){var f=5,a=8-f,l=1e3;function b(t,o,c){return(t<<2*f)+(o<<f)+c}function v(t){var o=[],c=!1;function p(){o.sort(t),c=!0}return{push:function(r){o.push(r),c=!1},peek:function(r){return c||p(),r===void 0&&(r=o.length-1),o[r]},pop:function(){return c||p(),o.pop()},size:function(){return o.length},map:function(r){return o.map(r)},debug:function(){return c||p(),o}}}function w(t,o,c,p,r,e,s){var d=this;d.r1=t,d.r2=o,d.g1=c,d.g2=p,d.b1=r,d.b2=e,d.histo=s}function E(){this.vboxes=new v(function(t,o){return T.naturalOrder(t.vbox.count()*t.vbox.volume(),o.vbox.count()*o.vbox.volume())})}function z(t,o){if(o.count()){var c=o.r2-o.r1+1,p=o.g2-o.g1+1,r=T.max([c,p,o.b2-o.b1+1]);if(o.count()==1)return[o.copy()];var e,s,d,g,_=0,y=[],n=[];if(r==c)for(e=o.r1;e<=o.r2;e++){for(g=0,s=o.g1;s<=o.g2;s++)for(d=o.b1;d<=o.b2;d++)g+=t[b(e,s,d)]||0;y[e]=_+=g}else if(r==p)for(e=o.g1;e<=o.g2;e++){for(g=0,s=o.r1;s<=o.r2;s++)for(d=o.b1;d<=o.b2;d++)g+=t[b(s,e,d)]||0;y[e]=_+=g}else for(e=o.b1;e<=o.b2;e++){for(g=0,s=o.r1;s<=o.r2;s++)for(d=o.g1;d<=o.g2;d++)g+=t[b(s,d,e)]||0;y[e]=_+=g}return y.forEach(function(m,u){n[u]=_-m}),function(m){var u,h,C,x,k,S=m+"1",I=m+"2",j=0;for(e=o[S];e<=o[I];e++)if(y[e]>_/2){for(C=o.copy(),x=o.copy(),k=(u=e-o[S])<=(h=o[I]-e)?Math.min(o[I]-1,~~(e+h/2)):Math.max(o[S],~~(e-1-u/2));!y[k];)k++;for(j=n[k];!j&&y[k-1];)j=n[--k];return C[I]=k,x[S]=C[I]+1,[C,x]}}(r==c?"r":r==p?"g":"b")}}return w.prototype={volume:function(t){var o=this;return o._volume&&!t||(o._volume=(o.r2-o.r1+1)*(o.g2-o.g1+1)*(o.b2-o.b1+1)),o._volume},count:function(t){var o=this,c=o.histo;if(!o._count_set||t){var p,r,e,s=0;for(p=o.r1;p<=o.r2;p++)for(r=o.g1;r<=o.g2;r++)for(e=o.b1;e<=o.b2;e++)s+=c[b(p,r,e)]||0;o._count=s,o._count_set=!0}return o._count},copy:function(){var t=this;return new w(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(t){var o=this,c=o.histo;if(!o._avg||t){var p,r,e,s,d=0,g=1<<8-f,_=0,y=0,n=0;for(r=o.r1;r<=o.r2;r++)for(e=o.g1;e<=o.g2;e++)for(s=o.b1;s<=o.b2;s++)d+=p=c[b(r,e,s)]||0,_+=p*(r+.5)*g,y+=p*(e+.5)*g,n+=p*(s+.5)*g;o._avg=d?[~~(_/d),~~(y/d),~~(n/d)]:[~~(g*(o.r1+o.r2+1)/2),~~(g*(o.g1+o.g2+1)/2),~~(g*(o.b1+o.b2+1)/2)]}return o._avg},contains:function(t){var o=this,c=t[0]>>a;return gval=t[1]>>a,bval=t[2]>>a,c>=o.r1&&c<=o.r2&&gval>=o.g1&&gval<=o.g2&&bval>=o.b1&&bval<=o.b2}},E.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var o=this.vboxes,c=0;c<o.size();c++)if(o.peek(c).vbox.contains(t))return o.peek(c).color;return this.nearest(t)},nearest:function(t){for(var o,c,p,r=this.vboxes,e=0;e<r.size();e++)((c=Math.sqrt(Math.pow(t[0]-r.peek(e).color[0],2)+Math.pow(t[1]-r.peek(e).color[1],2)+Math.pow(t[2]-r.peek(e).color[2],2)))<o||o===void 0)&&(o=c,p=r.peek(e).color);return p},forcebw:function(){var t=this.vboxes;t.sort(function(r,e){return T.naturalOrder(T.sum(r.color),T.sum(e.color))});var o=t[0].color;o[0]<5&&o[1]<5&&o[2]<5&&(t[0].color=[0,0,0]);var c=t.length-1,p=t[c].color;p[0]>251&&p[1]>251&&p[2]>251&&(t[c].color=[255,255,255])}},{quantize:function(t,o){if(!t.length||o<2||o>256)return!1;var c=function(g){var _,y=new Array(1<<3*f);return g.forEach(function(n){_=b(n[0]>>a,n[1]>>a,n[2]>>a),y[_]=(y[_]||0)+1}),y}(t);c.forEach(function(){});var p=function(g,_){var y,n,m,u=1e6,h=0,C=1e6,x=0,k=1e6,S=0;return g.forEach(function(I){(y=I[0]>>a)<u?u=y:y>h&&(h=y),(n=I[1]>>a)<C?C=n:n>x&&(x=n),(m=I[2]>>a)<k?k=m:m>S&&(S=m)}),new w(u,h,C,x,k,S,_)}(t,c),r=new v(function(g,_){return T.naturalOrder(g.count(),_.count())});function e(g,_){for(var y,n=g.size(),m=0;m<l;){if(n>=_||m++>l)return;if((y=g.pop()).count()){var u=z(c,y),h=u[0],C=u[1];if(!h)return;g.push(h),C&&(g.push(C),n++)}else g.push(y),m++}}r.push(p),e(r,.75*o);for(var s=new v(function(g,_){return T.naturalOrder(g.count()*g.volume(),_.count()*_.volume())});r.size();)s.push(r.pop());e(s,o);for(var d=new E;s.size();)d.push(s.pop());return d}}}().quantize,B=function(f){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=f.naturalWidth,this.height=this.canvas.height=f.naturalHeight,this.context.drawImage(f,0,0,this.width,this.height)};B.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var H=function(){};H.prototype.getColor=function(f,a){return a===void 0&&(a=10),this.getPalette(f,5,a)[0]},H.prototype.getPalette=function(f,a,l){var b=function(z){var t=z.colorCount,o=z.quality;if(t!==void 0&&Number.isInteger(t)){if(t===1)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");t=Math.max(t,2),t=Math.min(t,20)}else t=10;return(o===void 0||!Number.isInteger(o)||o<1)&&(o=10),{colorCount:t,quality:o}}({colorCount:a,quality:l}),v=new B(f),w=function(z,t,o){for(var c,p,r,e,s,d=z,g=[],_=0;_<t;_+=o)p=d[0+(c=4*_)],r=d[c+1],e=d[c+2],((s=d[c+3])===void 0||s>=125)&&(p>250&&r>250&&e>250||g.push([p,r,e]));return g}(v.getImageData().data,v.width*v.height,b.quality),E=W(w,b.colorCount);return E?E.palette():null},H.prototype.getColorFromUrl=function(f,a,l){var b=this,v=document.createElement("img");v.addEventListener("load",function(){var w=b.getPalette(v,5,l);a(w[0],f)}),v.src=f},H.prototype.getImageData=function(f,a){var l=new XMLHttpRequest;l.open("GET",f,!0),l.responseType="arraybuffer",l.onload=function(){if(this.status==200){var b=new Uint8Array(this.response);i=b.length;for(var v=new Array(i),w=0;w<b.length;w++)v[w]=String.fromCharCode(b[w]);var E=v.join(""),z=window.btoa(E);a("data:image/png;base64,"+z)}},l.send()},H.prototype.getColorAsync=function(f,a,l){var b=this;this.getImageData(f,function(v){var w=document.createElement("img");w.addEventListener("load",function(){var E=b.getPalette(w,5,l);a(E[0],this)}),w.src=v})};const L=f=>($("data-v-0b7327c9"),f=f(),G(),f),X=["src"],J={class:"container"},K=L(()=>M("p",null,"当前颜色: ",-1)),Q={class:"container"},Y=L(()=>M("p",null,"低饱和度: ",-1)),Z={class:"container"},oo=L(()=>M("p",null,"莫兰迪色: ",-1)),to={class:"container"},eo=L(()=>M("p",null,"深色: ",-1)),ro={class:"container"},no=L(()=>M("p",null,"浅色: ",-1)),co=N({__name:"Salesreport",setup(f){const a=["#ebd9cb","#f9f6f1","#dbe2ec","#8d91aa","#e2e2e2","#decece","#f7f0ea","#e7adac","#78677a","#d8b0b0","#f0f0f2","#e7e7e5","#acd4d6","#797979","#dfdfdf","#ebc1a8","#ebdac8","#f6f2f1","#cac0b7","#d2d3d5","#a2886d","#c3bab1","#f1e2db","#daccc1","#bfcac2","#013e41","#c6dee0","#f7edeb","#a6baaf","#4a475c","#ceaeb9","#e9cec3","#eed9d4","#8d7477","#6e4740","#5e5d65","#cb9b8f","#f6e1dc","#b5bac0","#5b7493","#e3bcb5","#a7bec6","#f4f4f4","#b98a82","#f5f4f0","#bfbfc1","#b4a29e","#e0d3c3","#ebe8e3","#e4dbd2","#bea8aa","#9aa2ad","#9b8d8c","#decfcc"],l=O({color:[],color1:[],color2:[],color3:[],color4:[]}),b=O({color:[],color1:[],color2:[],color3:[],color4:[]}),v=O({color:[],color1:[],color2:[],color3:[],color4:[]}),w=O({dark:[],light:[]}),E=R("");U(()=>{});const z=()=>{let n=document.querySelector("#domImg"),m=new H;l.color=m.getPalette(n)[0],l.color1=m.getPalette(n)[2],l.color2=m.getPalette(n)[4],l.color3=m.getPalette(n)[6],l.color4=m.getPalette(n)[8],console.log(l.color),t(),o()},t=()=>{b.color=c(l.color),b.color1=c(l.color1),b.color2=c(l.color2),b.color3=c(l.color3),b.color4=c(l.color4),console.log(b)},o=()=>{v.color=s(r(l.color,a)),v.color1=s(r(l.color1,a)),v.color2=s(r(l.color2,a)),v.color3=s(r(l.color3,a)),v.color4=s(r(l.color4,a));const n=_([r(l.color,a),r(l.color1,a),r(l.color2,a),r(l.color3,a),r(l.color4,a)]);w.dark=n.dark,w.light=n.light},c=n=>n.map(u=>u*.7),p=n=>{var h;const u=(h=n.target.files)==null?void 0:h[0];if(u){const C=new FileReader;C.onload=()=>{setTimeout(z,100),E.value=C.result},C.readAsDataURL(u)}},r=(n,m)=>{let u=1/0,h="";for(const C of m){const x=Math.sqrt(Math.pow(n[0]-parseInt(C.slice(1,3),16),2)+Math.pow(n[1]-parseInt(C.slice(3,5),16),2)+Math.pow(n[2]-parseInt(C.slice(5,7),16),2));x<u&&(u=x,h=C)}return h};function e(n,m,u){const h=S=>{const I=S.toString(16);return I.length===1?"0"+I:I},C=h(n),x=h(m),k=h(u);return"#"+C+x+k}function s(n){n=n.replace(/^#/,"");const m=parseInt(n.substring(0,2),16),u=parseInt(n.substring(2,4),16),h=parseInt(n.substring(4,6),16);return[m,u,h]}const d=e(255,128,0);console.log(d);const g=s("#ff8000");console.log(g);function _(n){const u={dark:[],light:[]};for(const h of n){const C=s(h);y(C)<128?u.dark.push(h):u.light.push(h)}return u}function y(n){return n[0]*.299+n[1]*.587+n[2]*.114}return(n,m)=>(q(),P(D,null,[M("img",{id:"domImg",src:E.value,height:"100",width:"100",crossorigin:"anonymous"},null,8,X),M("button",{onClick:z},"获取颜色"),M("input",{type:"file",onChange:p},null,32),M("div",J,[K,(q(!0),P(D,null,A(l,(u,h)=>(q(),P("span",{key:h,style:F({backgroundColor:`rgb(${u.join(",")})`})},null,4))),128))]),M("div",Q,[Y,(q(!0),P(D,null,A(b,(u,h)=>(q(),P("span",{key:h,style:F({backgroundColor:`rgb(${u.join(",")})`})},null,4))),128))]),M("div",Z,[oo,(q(!0),P(D,null,A(v,(u,h)=>(q(),P("span",{key:h,style:F({backgroundColor:`rgb(${u.join(",")})`})},null,4))),128))]),M("div",to,[eo,(q(!0),P(D,null,A(w.dark,(u,h)=>(q(),P("span",{key:h,style:F({backgroundColor:u})},null,4))),128))]),M("div",ro,[no,(q(!0),P(D,null,A(w.light,(u,h)=>(q(),P("span",{key:h,style:F({backgroundColor:u})},null,4))),128))])],64))}});const lo=V(co,[["__scopeId","data-v-0b7327c9"]]);export{lo as default};
